<h1>All Computers</h1>
<%= form_tag delete_multiple_computers_path, remote: true do %>
<table id="products" class="table table-striped table-bordered table-hover table-condensed table-responsive" >
  <tr>
    <th><input type="checkbox" onclick="toggle_checkall('computer', this.checked);"></th>
    <th>Asset Number</th>
    <th>Serail Number</th>
    <th>IP</th>
    <th>Idrac_IP</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
<% @computers.each do |computer| %>
  <tr>
    <td><%= check_box_tag "computer_ids[]", computer.id %></td>
    <td><%= computer.asset_number %></td>
    <td><%= computer.sn %></td>
    <td><%= computer.ip %></td>
    <td><%= computer.idrac_ip %></td>
    <td>| <%= link_to "Show", computer %></td>
    <td>| <%= link_to "Edit", edit_computer_path(id: computer.id) %></td>
    <td>| <%= link_to "Delete", computer, method: :delete,
                                  data: { confirm: "You sure?" } %></td>
  </tr>
<% end %>
</table>
<%= submit_tag "Delete Checked" %>
<% end %>

<h2>Import Computers</h2>
<%= form_tag import_computers_path, multipart: true do %>
  <%= file_field_tag :file %>
  <%= submit_tag "Import" %>
<% end %>
<script>
function toggle_checkall(field_name, state) {
  var checkboxes = document.getElementsByTagName('input');
  var count = checkboxes.length;
  for (var i = 0; i < count; i++) {
    if (checkboxes[i].type == "checkbox"
        && checkboxes[i].name == field_name + "_ids[]") {
      checkboxes[i].checked = state;
    }
  }
}
</script>
